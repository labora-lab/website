---
import { getRelativeLocaleUrl } from 'astro:i18n';
import { getOtherLang } from '../i18n/translations';
import type { Lang } from '../i18n/translations';

interface Props {
	lang: Lang;
	currentPath?: string;
}

const { lang, currentPath = '' } = Astro.props;
const otherLang = getOtherLang(lang);
const switchUrl = getRelativeLocaleUrl(otherLang, currentPath);
---

<div class="relative inline-flex items-center gap-2 group">
	<span
		class:list={[
			'text-sm font-medium transition-colors',
			lang === 'pt' ? 'text-blue-600' : 'text-gray-400',
		]}
	>
		PT
	</span>
	<span class="text-sm text-gray-400">|</span>
	<span
		class:list={[
			'text-sm font-medium transition-colors',
			lang === 'en' ? 'text-blue-600' : 'text-gray-400',
		]}
	>
		EN
	</span>
	<a
		href={switchUrl}
		class="absolute inset-0 cursor-pointer"
		aria-label={lang === 'pt' ? 'Switch to English' : 'Mudar para Português'}
	>
		<span class="sr-only"
			>{lang === 'pt' ? 'Switch to English' : 'Mudar para Português'}</span
		>
	</a>
</div>
