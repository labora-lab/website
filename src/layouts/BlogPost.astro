---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import type { Lang } from '../i18n/translations';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage, lang } = Astro.props;
---

<BaseLayout title={title} description={description} lang={lang} image={heroImage}>
	<article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
		<!-- Hero Image -->
		{
			heroImage && (
				<div class="mb-8 -mx-4 sm:mx-0">
					<Image
						width={1020}
						height={510}
						src={heroImage}
						alt={title}
						class="w-full h-auto rounded-lg shadow-lg"
					/>
				</div>
			)
		}

		<!-- Header -->
		<header class="mb-8 text-center">
			<div class="mb-4 text-sm text-gray-600">
				<FormattedDate date={pubDate} lang={lang} />
				{
					updatedDate && (
						<div class="mt-2 italic">
							{lang === 'pt' ? 'Atualizado em' : 'Last updated on'}{' '}
							<FormattedDate date={updatedDate} lang={lang} />
						</div>
					)
				}
			</div>
			<h1 class="text-4xl font-bold text-gray-900 mb-4">{title}</h1>
			<hr class="w-24 mx-auto border-t-2 border-blue-600" />
		</header>

		<!-- Content -->
		<div
			class="prose prose-lg prose-blue max-w-none
			prose-headings:font-bold prose-headings:text-gray-900
			prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
			prose-img:rounded-lg prose-img:shadow-md
			prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded
			prose-pre:bg-gray-900 prose-pre:text-gray-100"
		>
			<slot />
		</div>
	</article>
</BaseLayout>
